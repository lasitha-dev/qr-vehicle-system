# ================================
# SERVER CONFIGURATION
# ================================
server.port=8081
server.servlet.context-path=/

# ================================
# APPLICATION INFO
# ================================
spring.application.name=QR Vehicle System
app.name=QR Vehicle System - University of Peradeniya
app.version=1.0.0

# ================================
# PRIMARY DATABASE (Vehicle QR DB)
# ================================
spring.datasource.url=jdbc:mysql://localhost:3306/vehicle_qr_db?useSSL=false&serverTimezone=Asia/Colombo&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ================================
# JPA / HIBERNATE
# ================================
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
# Use physical naming strategy to preserve exact column names from @Column annotations
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# ================================
# THYMELEAF
# ================================
spring.thymeleaf.cache=false
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8

# ================================
# STATIC RESOURCES
# ================================
spring.web.resources.static-locations=classpath:/static/

# ================================
# FILE UPLOAD
# ================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ================================
# CUSTOM PATHS
# ================================
app.upload.certificate-path=./uploads/certificates/
app.upload.qrcode-path=./uploads/qrcodes/
app.upload.image-path=./uploads/images/

# ================================
# BACKUP
# ================================
app.backup.path=./backups/
app.backup.mysqldump-path=mysqldump

# ================================
# GOOGLE OAUTH2 (Update with your credentials)
# ================================
spring.security.oauth2.client.registration.google.client-id=YOUR_GOOGLE_CLIENT_ID
spring.security.oauth2.client.registration.google.client-secret=YOUR_GOOGLE_CLIENT_SECRET
spring.security.oauth2.client.registration.google.scope=email,profile
spring.security.oauth2.client.registration.google.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}

# ================================
# KEYCLOAK OIDC (University SSO)
# ================================
spring.security.oauth2.client.registration.keycloak.client-id=vehicle-pass-app
spring.security.oauth2.client.registration.keycloak.client-secret=vF9F8m66pwBBaJ5A0I9uh9CNXLnoeMQS
spring.security.oauth2.client.registration.keycloak.scope=openid,profile,email
spring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.keycloak.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}
spring.security.oauth2.client.registration.keycloak.client-name=University SSO (Keycloak)

spring.security.oauth2.client.provider.keycloak.issuer-uri=https://idp-auth.pdn.ac.lk/realms/idp-auth-realm
spring.security.oauth2.client.provider.keycloak.user-name-attribute=preferred_username

# Custom Keycloak OIDC config (app-level)
app.oidc.client-id=vehicle-pass-app
app.oidc.client-secret=vF9F8m66pwBBaJ5A0I9uh9CNXLnoeMQS
app.oidc.issuer-uri=https://idp-auth.pdn.ac.lk/realms/idp-auth-realm
app.oidc.redirect-uri=https://gatepass.pdn.ac.lk/login/oauth2/code/keycloak
app.oidc.post-logout-redirect-uri=https://gatepass.pdn.ac.lk
app.oidc.session-name=KCSESSID
app.oidc.token-refresh-threshold-seconds=60
app.oidc.token-refresh-grace-seconds=30

# ================================
# SECONDARY DATABASE (Student DB - studdb)
# ================================
app.datasource.studdb.url=jdbc:mysql://dbwala.pdn.ac.lk:3306/studdb?useSSL=false&serverTimezone=Asia/Colombo&allowPublicKeyRetrieval=true
app.datasource.studdb.username=root
app.datasource.studdb.password=
app.datasource.studdb.driver-class-name=com.mysql.cj.jdbc.Driver

# ================================
# EMAIL / SMTP
# ================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=nilupas79@gs.pdn.ac.lk
spring.mail.password=YOUR_APP_PASSWORD_HERE
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=3000
spring.mail.properties.mail.smtp.writetimeout=5000
app.mail.from=nilupas79@gs.pdn.ac.lk
app.mail.from-name=UOP Vehicle Registration

# ================================
# SESSION
# ================================
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true

# ================================
# LOGGING
# ================================
logging.level.root=INFO
logging.level.com.uop.qrvehicle=DEBUG
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=DEBUG
logging.file.name=app.log

# ================================
# ERROR HANDLING
# ================================
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=always
